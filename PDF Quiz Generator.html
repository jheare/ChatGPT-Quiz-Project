<!DOCTYPE html>
<html>
  <head>
    <title>Quiz Generator</title>
  </head>
  <body>
    <h1>Quiz Generator</h1>
    <p>Welcome to the quiz generator! Select a PDF file to generate quiz questions from it:</p>
    <input type="file" id="pdf-file" accept=".pdf">
    <button id="generate-quiz-button">Generate Quiz</button>
    <div id="quiz-container">
      <!-- This div will contain the quiz questions and answers -->
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.6.254/pdf.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/spaCy/3.0.4/spacy.min.js"></script>
    <script>
       // Event listener for the "Generate Quiz" button
      document.getElementById("generate-quiz-button").addEventListener("click", () => {
        // Get the PDF file from the input element
        const pdfFile = document.getElementById("pdf-file").files[0];
        
        // Load the PDF file using pdf.js
        const pdf = PDFJS.getDocument(pdfFile);
        pdf.then((pdf) => {
          // Once the PDF is loaded, extract the text from it
          pdf.getPage(1).then((page) => {
            page.getTextContent().then((textContent) => {
              // Use the text from the PDF to generate quiz questions
              generateQuizQuestions(textContent.items.map((item) => item.str).join("\n"));
            });
          });
        });
      });

 // Function to determine if a sentence is a question
async function isQuestion(sentence) {
  // Load the English model for spaCy
  const spacy = await spacy.load("en_core_web_sm");

  // Parse the sentence using spaCy
  const doc = spacy(sentence.text);

  // Check if the sentence is a question by checking its dependency parse
  return doc.sents[0].root.dep_ === "ROOT" && doc.sents[0].root.head.dep_ === "punct" && doc.sents[0].root.head.text === "?";
}  
      // Function to extract the options from a sentence
async function extractOptions(sentence) {
  // Load the English model for spaCy
  const spacy = await spacy.load("en_core_web_sm");

  // Parse the sentence using spaCy
  const doc = spacy(sentence.text);

  // Initialize an array to store the options
  const options = [];

  // Iterate through the tokens in the sentence
  for (let i = 0; i < doc.sents[0].tokens.length; i++) {
    // Check if the token is a noun
    if (doc.sents[0].tokens[i].pos_ === "NOUN") {
      // If the token is a noun, add it to the options array
      options.push(doc.sents[0].tokens[i].text);
    }
  }

  // Return the options array
  return options;
}
      // Function to generate quiz questions from the text
      async function generateQuizQuestions(text) {
        // Load the English model for spaCy
        const spacy = await spacy.load("en_core_web_sm");
        
        // Parse the text using spaCy
        const doc = spacy(text);
        
        // Initialize an array to store the quiz questions
        const quizQuestions = [];
        
        // Iterate through the sentences in the doc
        for (let i = 0; i < doc.sents.length; i++) {
          // Check if the sentence is a question
          if (isQuestion(doc.sents[i])) {
            // If the sentence is a question, extract the question and options
            const question = extractQuestion(doc.sents[i]);
            const options = extractOptions(doc.sents[i + 1]);
            
            // Add the question and options to the quizQuestions array
            quizQuestions.push({
              question: question,
              options: options
            });
          }
        }
  // Call the displayQuizQuestions function and pass it the quizQuestions array
  displayQuizQuestions(quizQuestions);
}
// Function to display the quiz questions on the website
function displayQuizQuestions(quizQuestions) {
  // Clear the quiz container
  document.getElementById("quiz-container").innerHTML = "";
  
  // Iterate through the quiz questions
  quizQuestions.forEach((quizQuestion) => {
    // Create a div to hold the question
    const questionDiv = document.createElement("div");
    questionDiv.innerHTML = quizQuestion.question;
    document.getElementById("quiz-container").appendChild(questionDiv);
    
    // Create a div to hold the options
    const optionsDiv = document.createElement("div");
    document.getElementById("quiz-container").appendChild(optionsDiv);
    
    // Create radio buttons for each option
    quizQuestion.options.forEach((option) => {
      const optionLabel = document.createElement("label");
      optionLabel.innerHTML = option;
      
      const optionInput = document.createElement("input");
      optionInput.type = "radio";
      optionInput.name = "options";
      optionInput.value = option;
      
      optionsDiv.appendChild(optionInput);
      optionsDiv.appendChild(optionLabel);
    });
  });
}
 displayQuizQuestions(quizQuestions);
    </script>
  </body>
</html>
